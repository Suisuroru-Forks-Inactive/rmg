import{b as a,d as Ee,r as t,a as We}from"./react-BkzPY0ae.js";import{_ as $e,M as Je,a as ge,C as Re,A as ne,H as Ge,b as Ke,G as Qe,c as qe,R as Ye,d as Ze,T as Xe,e as et,f as tt,g as st,B as rt,V as nt,h as ot,i as at,j as ct,F as lt,O as ut,k as it,l as dt,m as pt,n as ve,o as mt,p as ht}from"./ag-grid-community-SAKIZk2q.js";var Z=a.createContext({}),me=(e,s,r,n)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const l=e.newAgStackInstance();if(l==null)return;let u,o,i=!1;return l.then(d=>{if(i){s.destroyBean(d);return}u=d,o=u.getGui(),r.appendChild(o),Ae(n,u)}),()=>{i=!0,u&&(o&&o.parentElement&&o.parentElement.removeChild(o),s.destroyBean(u),n&&Ae(n,void 0))}},Ae=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},se=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),te=class Te{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const c=new Te;return c.classesMap={...this.classesMap},c.classesMap[s]=r,c}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},de=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Ne=Ee.createRoot!=null&&Ee.flushSync!=null;function ft(){return!Ne}var Ce=!1;function Ct(e){return Ce||setTimeout(()=>Ce=!1,0),Ce=!0,e()}var be=(e,s)=>{Ne&&e&&!Ce?Ee.flushSync(s):s()};function Pe(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const n=[],c=[],l=new Map,u=new Map;for(let o=0;o<s.length;o++){const i=s[o];u.set(i.getInstanceId(),i)}for(let o=0;o<e.length;o++){const i=e[o];l.set(i.getInstanceId(),i),u.has(i.getInstanceId())&&n.push(i)}for(let o=0;o<s.length;o++){const i=s[o],d=i.getInstanceId();l.has(d)||c.push(i)}return n.length===e.length&&c.length===0?e:n.length===0&&c.length===s.length?s:n.length===0?c:c.length===0?n:[...n,...c]}var He=t.forwardRef((e,s)=>{var O;const{ctrlsFactory:r,context:n}=t.useContext(Z),c=t.useRef(null),l=t.useRef(null),u=t.useRef(null),o=t.useRef(null),i=t.useRef(null),d=t.useRef(),[g,p]=t.useState(),[E,v]=t.useState(),[m,S]=t.useState(),[f,C]=t.useState(()=>new te),[y,P]=t.useState(()=>new te("ag-hidden")),[h,H]=t.useState(()=>new te("ag-hidden")),[k,D]=t.useState(()=>new te("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>me(g,n,l.current),[g]);const b=t.useCallback(B=>{if(c.current=B,!c.current){n.destroyBean(d.current),d.current=null;return}const L={setInnerRenderer:(T,M)=>{p(T),S(M)},setChildCount:T=>v(T),addOrRemoveCssClass:(T,M)=>C(J=>J.setClass(T,M)),setContractedDisplayed:T=>H(M=>M.setClass("ag-hidden",!T)),setExpandedDisplayed:T=>P(M=>M.setClass("ag-hidden",!T)),setCheckboxVisible:T=>D(M=>M.setClass("ag-invisible",!T))},_=r.getInstance("groupCellRendererCtrl");_&&(d.current=n.createBean(_),d.current.init(L,c.current,u.current,o.current,i.current,He,e))},[]),F=t.useMemo(()=>"ag-cell-wrapper ".concat(f.toString()),[f]),w=t.useMemo(()=>"ag-group-expanded ".concat(y.toString()),[y]),I=t.useMemo(()=>"ag-group-contracted ".concat(h.toString()),[h]),R=t.useMemo(()=>"ag-group-checkbox ".concat(k.toString()),[k]),A=g&&g.componentFromFramework,x=A?g.componentClass:void 0,U=g==null&&m!=null,W=$e(m,!0);return a.createElement("span",{className:F,ref:b,...e.colDef?{}:{role:(O=d.current)==null?void 0:O.getCellAriaRole()}},a.createElement("span",{className:w,ref:o}),a.createElement("span",{className:I,ref:i}),a.createElement("span",{className:R,ref:u}),a.createElement("span",{className:"ag-group-value",ref:l},U&&a.createElement(a.Fragment,null,W),A&&a.createElement(x,{...g.params})),a.createElement("span",{className:"ag-group-child-count"},E))}),Oe=He,ke=t.createContext({setMethods:()=>{}}),gt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:n,setMethods:c}=e,[l,u]=t.useState(s);return t.useEffect(()=>{r(o=>u(o))},[]),a.createElement(ke.Provider,{value:{setMethods:c}},a.createElement(n,{...l}))},Rt=t.memo(gt),yt=0;function xe(){return"agPortalKey_".concat(++yt)}var Ue=class{constructor(e,s,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=xe(),this.portalKey=xe(),this.instanceCreated=this.isStatelessComponent()?ne.resolve(!1):new ne(c=>{this.resolveInstanceCreated=c})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ge('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(ge('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(s=>this.eParentElement.classList.add(s))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const n=r[e];if(n)return n.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.params=e,this.createOrUpdatePortal(e),new ne(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,this.addParentContainerStyleAndClasses(),(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=We.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this["".concat(e,"Component")]}};function Me(e,s,r){e.forEach(n=>{const c=s[n];c&&(r[n]=c)})}var oe=class extends Ue{constructor(){super(...arguments),this.awaitUpdateCallback=new ne(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Rt}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ne(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Me(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ne(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},wt=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},vt=class extends oe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},St=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s;this.expectingNewMethods===!1&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function Le(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ne.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Et=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Le(this.floatingFilterParams,e)}},bt=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Le(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Pt=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},kt=class extends oe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Mt=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},Ft=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},It=class extends oe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Fe(){ge("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var Gt=1e3,At=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Gt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Ot=e=>{const{ctrl:s}=e,r=s.isAlive(),{context:n}=t.useContext(Z),c=r?s.getColId():void 0,[l,u]=t.useState(),o=t.useRef(null),i=t.useRef(null),d=t.useRef(null),g=t.useRef(),p=t.useRef();r&&!p.current&&(p.current=new Re(()=>o.current));const E=t.useCallback(f=>{var P;if(o.current=f,!o.current||!r)return;const C={setWidth:h=>{o.current&&(o.current.style.width=h)},addOrRemoveCssClass:(h,H)=>p.current.addOrRemoveCssClass(h,H),setAriaSort:h=>{o.current&&(h?ot(o.current,h):at(o.current))},setUserCompDetails:h=>u(h),getUserCompInstance:()=>g.current||void 0};s.setComp(C,o.current,i.current,d.current);const y=s.getSelectAllGui();(P=i.current)==null||P.insertAdjacentElement("afterend",y)},[]);t.useLayoutEffect(()=>me(l,n,d.current,g),[l]),t.useEffect(()=>{s.setDragSource(o.current)},[l]);const v=t.useMemo(()=>!!((l==null?void 0:l.componentFromFramework)&&de(l.componentClass)),[l]),m=l&&l.componentFromFramework,S=l&&l.componentClass;return a.createElement("div",{ref:E,className:"ag-header-cell","col-id":c,role:"columnheader"},a.createElement("div",{ref:i,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},m&&v&&a.createElement(S,{...l.params}),m&&!v&&a.createElement(S,{...l.params,ref:g})))},xt=t.memo(Ot),Bt=e=>{const{context:s,gos:r}=t.useContext(Z),[n,c]=t.useState(()=>new te("ag-header-cell","ag-floating-filter")),[l,u]=t.useState(()=>new te),[o,i]=t.useState(()=>new te("ag-floating-filter-button","ag-hidden")),[d,g]=t.useState("false"),[p,E]=t.useState(),[,v]=t.useState(1),m=t.useRef(null),S=t.useRef(null),f=t.useRef(null),C=t.useRef(null),y=t.useRef(),P=t.useRef(),h=W=>{W!=null&&y.current&&y.current(W)},{ctrl:H}=e,k=t.useCallback(W=>{if(m.current=W,!m.current)return;P.current=new ne(B=>{y.current=B});const O={addOrRemoveCssClass:(B,L)=>c(_=>_.setClass(B,L)),addOrRemoveBodyCssClass:(B,L)=>u(_=>_.setClass(B,L)),setButtonWrapperDisplayed:B=>{i(L=>L.setClass("ag-hidden",!B)),g(B?"false":"true")},setWidth:B=>{m.current&&(m.current.style.width=B)},setCompDetails:B=>E(B),getFloatingFilterComp:()=>P.current?P.current:null,setMenuIcon:B=>{var L;return(L=C.current)==null?void 0:L.appendChild(B)}};H.setComp(O,m.current,C.current,S.current)},[]);t.useLayoutEffect(()=>me(p,s,S.current,h),[p]);const D=t.useMemo(()=>n.toString(),[n]),b=t.useMemo(()=>l.toString(),[l]),F=t.useMemo(()=>o.toString(),[o]),w=t.useMemo(()=>!!(p&&p.componentFromFramework&&de(p.componentClass)),[p]),I=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),R=t.useMemo(()=>{if(p)if(I){const W=new Et(p.params,()=>v(O=>O+1));return h(W),W}else p.componentFromFramework&&Fe()},[p]),A=R==null?void 0:R.getProps(),x=p&&p.componentFromFramework,U=p&&p.componentClass;return a.createElement("div",{ref:k,className:D,role:"gridcell"},a.createElement("div",{ref:S,className:b,role:"presentation"},x&&!I&&a.createElement(U,{...p.params,ref:w?()=>{}:h}),x&&I&&a.createElement(ke.Provider,{value:{setMethods:W=>R.setMethods(W)}},a.createElement(U,{...A}))),a.createElement("div",{ref:f,"aria-hidden":d,className:F,role:"presentation"},a.createElement("button",{ref:C,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Dt=t.memo(Bt),Wt=e=>{const{context:s}=t.useContext(Z),{ctrl:r}=e,[n,c]=t.useState(()=>new te),[l,u]=t.useState(()=>new te),[o,i]=t.useState("false"),[d,g]=t.useState(),[p,E]=t.useState(),v=t.useMemo(()=>r.getColId(),[]),m=t.useRef(null),S=t.useRef(null),f=t.useRef(null),C=t.useRef(),y=t.useCallback(b=>{if(m.current=b,!m.current)return;const F={setWidth:w=>{m.current&&(m.current.style.width=w)},addOrRemoveCssClass:(w,I)=>c(R=>R.setClass(w,I)),setUserCompDetails:w=>E(w),setResizableDisplayed:w=>{u(I=>I.setClass("ag-hidden",!w)),i(w?"false":"true")},setAriaExpanded:w=>g(w),getUserCompInstance:()=>C.current||void 0};r.setComp(F,m.current,S.current,f.current)},[]);t.useLayoutEffect(()=>me(p,s,f.current),[p]),t.useEffect(()=>{m.current&&r.setDragSource(m.current)},[p]);const P=t.useMemo(()=>!!((p==null?void 0:p.componentFromFramework)&&de(p.componentClass)),[p]),h=t.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),H=t.useMemo(()=>"ag-header-cell-resize "+l.toString(),[l]),k=p&&p.componentFromFramework,D=p&&p.componentClass;return a.createElement("div",{ref:y,className:h,"col-id":v,role:"columnheader","aria-expanded":d},a.createElement("div",{ref:f,className:"ag-header-cell-comp-wrapper",role:"presentation"},k&&P&&a.createElement(D,{...p.params}),k&&!P&&a.createElement(D,{...p.params,ref:C})),a.createElement("div",{ref:S,"aria-hidden":o,className:H}))},Tt=t.memo(Wt),Nt=e=>{const{ctrl:s}=e,{topOffset:r,rowHeight:n}=t.useMemo(()=>s.getTopAndHeight(),[]),c=s.getAriaRowIndex(),l=s.getHeaderRowClass(),[u,o]=t.useState(()=>n+"px"),[i,d]=t.useState(()=>r+"px"),g=t.useRef(null),p=t.useRef(null),[E,v]=t.useState(()=>s.getHeaderCtrls()),m=t.useRef(null),S=t.useCallback(y=>{if(m.current=y,!y)return;const P={setHeight:h=>o(h),setTop:h=>d(h),setHeaderCtrls:(h,H,k)=>{p.current=g.current,g.current=h;const D=Pe(p.current,h,H);D!==p.current&&be(k,()=>v(D))},setWidth:h=>{m.current&&(m.current.style.width=h)}};s.setComp(P,!1)},[]),f=t.useMemo(()=>({height:u,top:i}),[u,i]),C=t.useCallback(y=>{switch(s.getType()){case Ge.COLUMN_GROUP:return a.createElement(Tt,{ctrl:y,key:y.getInstanceId()});case Ge.FLOATING_FILTER:return a.createElement(Dt,{ctrl:y,key:y.getInstanceId()});default:return a.createElement(xt,{ctrl:y,key:y.getInstanceId()})}},[]);return a.createElement("div",{ref:S,className:l,role:"row",style:f,"aria-rowindex":c},E.map(C))},Ht=t.memo(Nt),Ut=e=>{const[s,r]=t.useState(!0),[n,c]=t.useState([]),{context:l}=t.useContext(Z),u=t.useRef(null),o=t.useRef(null),i=t.useRef(null),d=e.pinned==="left",g=e.pinned==="right",p=!d&&!g,E=t.useCallback(S=>{if(u.current=S,!u.current){l.destroyBean(i.current),i.current=null;return}const f={setDisplayed:r,setCtrls:C=>c(C),setCenterWidth:C=>{o.current&&(o.current.style.width=C)},setViewportScrollLeft:C=>{u.current&&(u.current.scrollLeft=C)},setPinnedContainerWidth:C=>{u.current&&(u.current.style.width=C,u.current.style.minWidth=C,u.current.style.maxWidth=C)}};i.current=l.createBean(new Ke(e.pinned)),i.current.setComp(f,u.current)},[]),v=s?"":"ag-hidden",m=()=>n.map(S=>a.createElement(Ht,{ctrl:S,key:S.getInstanceId()}));return a.createElement(a.Fragment,null,d&&a.createElement("div",{ref:E,className:"ag-pinned-left-header "+v,"aria-hidden":!s,role:"rowgroup"},m()),g&&a.createElement("div",{ref:E,className:"ag-pinned-right-header "+v,"aria-hidden":!s,role:"rowgroup"},m()),p&&a.createElement("div",{ref:E,className:"ag-header-viewport "+v,role:"presentation"},a.createElement("div",{ref:o,className:"ag-header-container",role:"rowgroup"},m())))},Se=t.memo(Ut),Lt=()=>{const[e,s]=t.useState(()=>new te),[r,n]=t.useState(),{context:c}=t.useContext(Z),l=t.useRef(null),u=t.useRef(null),o=t.useCallback(g=>{if(l.current=g,!g){c.destroyBean(u.current),u.current=null;return}const p={addOrRemoveCssClass:(E,v)=>s(m=>m.setClass(E,v)),setHeightAndMinHeight:E=>n(E)};u.current=c.createBean(new Qe),u.current.setComp(p,l.current,l.current)},[]),i=t.useMemo(()=>"ag-header "+e.toString(),[e]),d=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:o,className:i,style:d,role:"presentation"},a.createElement(Se,{pinned:"left"}),a.createElement(Se,{pinned:null}),a.createElement(Se,{pinned:"right"}))},Vt=t.memo(Lt),_t=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const n=r.parentElement;if(n){const c=document.createComment(e);return n.insertBefore(c,r),()=>{n.removeChild(c)}}}},[e])},le=_t,jt=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ne(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},zt=e=>{const s=t.useRef(e),r=t.useRef(),n=t.useRef(!1),c=t.useRef(!1),[,l]=t.useState(0);n.current&&(c.current=!0),t.useEffect(()=>(n.current||(r.current=s.current(),n.current=!0),l(u=>u+1),()=>{c.current&&r.current&&r.current()}),[])},$t=e=>{const[s,r]=t.useState(),{context:n,popupService:c,localeService:l,gos:u,editService:o}=t.useContext(Z);return zt(()=>{const{editDetails:i,cellCtrl:d,eParentCell:g}=e,{compDetails:p}=i,E=u.get("stopEditingWhenCellsLoseFocus"),v=n.createBean(o.createPopupEditorWrapper(p.params)),m=v.getGui();if(e.jsChildComp){const h=e.jsChildComp.getGui();h&&m.appendChild(h)}const S={column:d.getColumn(),rowNode:d.getRowNode(),type:"popupCellEditor",eventSource:g,ePopup:m,position:i.popupPosition,keepWithinBounds:!0},f=c.positionPopupByComponent.bind(c,S),C=l.getLocaleTextFunc(),y=c.addPopup({modal:E,eChild:m,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:g,positionCallback:f,ariaLabel:C("ariaLabelCellEditor","Cell Editor")}),P=y?y.hideFunc:void 0;return r(v),e.jsChildComp&&e.jsChildComp.afterGuiAttached&&e.jsChildComp.afterGuiAttached(),()=>{P!=null&&P(),n.destroyBean(v)}}),a.createElement(a.Fragment,null,s&&e.wrappedContent&&We.createPortal(e.wrappedContent,s.getGui()))},Be=t.memo($t),Jt=(e,s,r,n,c,l)=>{const{context:u}=t.useContext(Z),o=t.useCallback(()=>{const i=c.current;if(!i)return;const d=i.getGui();d&&d.parentElement&&d.parentElement.removeChild(d),u.destroyBean(i),c.current=void 0},[]);t.useEffect(()=>{const i=e!=null,d=e&&e.compDetails&&!e.compDetails.componentFromFramework,g=s&&r==null;if(!(i&&d&&!g)){o();return}const E=e.compDetails;if(c.current){const m=c.current,f=m.refresh!=null&&e.force==!1?m.refresh(E.params):!1;if(f===!0||f===void 0)return;o()}const v=E.newAgStackInstance();v!=null&&v.then(m=>{if(!m)return;const S=m.getGui();if(!S)return;(s?r:l.current).appendChild(S),c.current=m})},[e,s,n]),t.useEffect(()=>o,[])},Kt=Jt,Qt=(e,s,r)=>{const{compProxy:n}=e;r(n);const c=n.getProps(),l=de(s);return a.createElement(ke.Provider,{value:{setMethods:u=>n.setMethods(u)}},l&&a.createElement(s,{...c}),!l&&a.createElement(s,{...c,ref:u=>n.setRef(u)}))},De=(e,s,r)=>{const n=e.compProxy;return a.createElement(a.Fragment,null,!n&&a.createElement(s,{...e.compDetails.params,ref:r}),n&&Qt(e,s,r))},qt=(e,s,r,n,c,l)=>{const u=e.compDetails,o=u.componentClass,i=u.componentFromFramework&&!e.popup,d=u.componentFromFramework&&e.popup,g=!u.componentFromFramework&&e.popup;return a.createElement(a.Fragment,null,i&&De(e,o,s),d&&a.createElement(Be,{editDetails:e,cellCtrl:c,eParentCell:n,wrappedContent:De(e,o,r)}),g&&l&&a.createElement(Be,{editDetails:e,cellCtrl:c,eParentCell:n,jsChildComp:l}))},Yt=(e,s,r,n,c,l,u)=>{const{compDetails:o,value:i}=e,d=!o,g=o&&o.componentFromFramework,p=o&&o.componentClass,E=i!=null&&i.toString?i.toString():i,v=()=>a.createElement(a.Fragment,null,d&&a.createElement(a.Fragment,null,E),g&&!l&&a.createElement(p,{...o.params,key:s,ref:n}),g&&l&&a.createElement(p,{...o.params,key:s}));return a.createElement(a.Fragment,null,c?a.createElement("span",{role:"presentation",id:"cell-".concat(r),className:"ag-cell-value",ref:u},v()):v())},Zt=e=>{const{context:s}=t.useContext(Z),{cellCtrl:r,printLayout:n,editingRow:c}=e,l=r.getColumnIdSanitised(),u=r.getInstanceId(),[o,i]=t.useState(()=>r.isCellRenderer()?void 0:{compDetails:void 0,value:r.getValueToDisplay(),force:!1}),[d,g]=t.useState(),[p,E]=t.useState(1),[v,m]=t.useState(),[S,f]=t.useState(!1),[C,y]=t.useState(!1),[P,h]=t.useState(!1),[H,k]=t.useState(),D=t.useMemo(()=>r.isForceWrapper(),[r]),b=t.useMemo(()=>r.getCellAriaRole(),[r]),F=t.useRef(null),w=t.useRef(null),I=t.useRef(),R=t.useRef(),A=t.useRef(),x=t.useRef([]),U=t.useRef(),[W,O]=t.useState(0),B=t.useCallback(j=>{U.current=j,O($=>$+1)},[]),L=o!=null&&(S||P||C),_=D||L,T=t.useCallback((j,$)=>{R.current=$,$&&$.isCancelBeforeStart&&$.isCancelBeforeStart()&&setTimeout(()=>{r.stopEditing(!0),r.focusCell(!0)})},[r]),M=t.useCallback(j=>T(!0,j),[T]),J=t.useCallback(j=>T(!1,j),[T]),G=t.useRef();G.current||(G.current=new Re(()=>F.current)),Kt(o,_,U.current,W,I,F);const ee=t.useRef();t.useLayoutEffect(()=>{const j=ee.current,$=o;if(ee.current=o,j==null||j.compDetails==null||$==null||$.compDetails==null)return;const K=j.compDetails,N=$.compDetails;if(K.componentClass!=N.componentClass||w.current==null||w.current.refresh==null)return;w.current.refresh(N.params)!=!0&&E(Y=>Y+1)},[o]),t.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const $=d.compDetails,K=d.popup===!0,N=$.newAgStackInstance();return N.then(V=>{if(!V)return;const Y=V.getGui();if(T(K,V),!K){const Q=(D?A:F).current;Q==null||Q.appendChild(Y),V.afterGuiAttached&&V.afterGuiAttached()}k(V)}),()=>{N.then(V=>{const Y=V.getGui();s.destroyBean(V),T(K,void 0),k(void 0),Y&&Y.parentElement&&Y.parentElement.removeChild(Y)})}},[d]);const q=t.useCallback(j=>{if(A.current=j,!A.current){x.current.forEach(K=>K()),x.current=[];return}const $=K=>{var N;if(K){const V=K.getGui();(N=A.current)==null||N.insertAdjacentElement("afterbegin",V),x.current.push(()=>{s.destroyBean(K),ct(V)})}return K};if(S){const K=r.createSelectionCheckbox();$(K)}P&&$(r.createDndSource()),C&&$(r.createRowDragComp())},[r,s,P,C,S]),re=t.useCallback(j=>{if(F.current=j,!F.current||!r)return;const $={addOrRemoveCssClass:(N,V)=>G.current.addOrRemoveCssClass(N,V),setUserStyles:N=>m(N),getFocusableElement:()=>F.current,setIncludeSelection:N=>f(N),setIncludeRowDrag:N=>y(N),setIncludeDndSource:N=>h(N),getCellEditor:()=>R.current||null,getCellRenderer:()=>w.current?w.current:I.current,getParentOfValue:()=>U.current?U.current:A.current?A.current:F.current,setRenderDetails:(N,V,Y)=>{i(Q=>(Q==null?void 0:Q.compDetails)!==N||(Q==null?void 0:Q.value)!==V||(Q==null?void 0:Q.force)!==Y?{value:V,compDetails:N,force:Y}:Q)},setEditDetails:(N,V,Y,Q)=>{if(N){let ae;Q?ae=new jt(N.params,()=>E(ce=>ce+1)):N.componentFromFramework&&Fe(),g({compDetails:N,popup:V,popupPosition:Y,compProxy:ae}),V||i(void 0)}else g(ae=>{ae!=null&&ae.compProxy&&(R.current=void 0)})}},K=A.current||void 0;r.setComp($,F.current,K,n,c)},[]),ue=t.useMemo(()=>!!(o&&o.compDetails&&o.compDetails.componentFromFramework&&de(o.compDetails.componentClass)),[o]);t.useLayoutEffect(()=>{var j;F.current&&(G.current.addOrRemoveCssClass("ag-cell-value",!_),G.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),G.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),G.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),(j=r.getRowCtrl())==null||j.setInlineEditingCss(),r.shouldRestoreFocus()&&!r.isEditing()&&F.current.focus({preventScroll:!0}))});const he=()=>a.createElement(a.Fragment,null,o!=null&&Yt(o,p,u,w,_,ue,B),d!=null&&qt(d,J,M,F.current,r,H)),ye=t.useCallback(()=>r.onFocusOut(),[]);return a.createElement("div",{ref:re,style:v,role:b,"col-id":l,onBlur:ye},_?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:q},he()):he())},Xt=t.memo(Zt),es=e=>{const{context:s,gos:r}=t.useContext(Z),{rowCtrl:n,containerType:c}=e,l=t.useRef(n.getDomOrder()),u=n.isFullWidth(),o=n.getRowNode().displayed,[i,d]=t.useState(()=>o?n.getRowIndex():null),[g,p]=t.useState(()=>n.getRowId()),[E,v]=t.useState(()=>n.getBusinessKey()),[m,S]=t.useState(()=>n.getRowStyles()),f=t.useRef(null),C=t.useRef(null),[y,P]=t.useState(()=>null),[h,H]=t.useState(),[k,D]=t.useState(()=>o?n.getInitialRowTop(c):void 0),[b,F]=t.useState(()=>o?n.getInitialTransform(c):void 0),w=t.useRef(null),I=t.useRef(),R=t.useRef(!1),[A,x]=t.useState(0);t.useEffect(()=>{var ee;if(R.current||!h||A>10)return;const G=(ee=w.current)==null?void 0:ee.firstChild;G?(n.setupDetailRowAutoHeight(G),R.current=!0):x(q=>q+1)},[h,A]);const U=t.useRef();U.current||(U.current=new Re(()=>w.current));const W=t.useCallback(G=>{if(w.current=G,!w.current){n.unsetComp(c);return}if(!n.isAlive())return;const ee={setTop:D,setTransform:F,addOrRemoveCssClass:(q,re)=>U.current.addOrRemoveCssClass(q,re),setDomOrder:q=>l.current=q,setRowIndex:d,setRowId:p,setRowBusinessKey:v,setUserStyles:S,setCellCtrls:(q,re)=>{C.current=f.current,f.current=q;const ue=Pe(C.current,q,l.current);ue!==C.current&&be(re,()=>P(ue))},showFullWidth:q=>H(q),getFullWidthCellRenderer:()=>I.current,refreshFullWidth:q=>T.current?(H(re=>({...re,params:q()})),!0):!I.current||!I.current.refresh?!1:I.current.refresh(q())};n.setComp(ee,w.current,c)},[]);t.useLayoutEffect(()=>me(h,s,w.current,I),[h]);const O=t.useMemo(()=>{const G={top:k,transform:b};return Object.assign(G,m),G},[k,b,m]),B=u&&h&&h.componentFromFramework,L=!u&&y!=null,_=t.useMemo(()=>!!((h==null?void 0:h.componentFromFramework)&&de(h.componentClass)),[h]),T=t.useRef(!1);t.useEffect(()=>{T.current=_&&!!h&&!!r.get("reactiveCustomComponents")},[_,h]);const M=()=>y==null?void 0:y.map(G=>a.createElement(Xt,{cellCtrl:G,editingRow:n.isEditing(),printLayout:n.isPrintLayout(),key:G.getInstanceId()})),J=()=>{const G=h.componentClass;return a.createElement(a.Fragment,null,_&&a.createElement(G,{...h.params}),!_&&a.createElement(G,{...h.params,ref:I}))};return a.createElement("div",{ref:W,role:"row",style:O,"row-index":i,"row-id":g,"row-business-key":E},L&&M(),B&&J())},ts=t.memo(es),ss=e=>{const{context:s}=t.useContext(Z),{name:r}=e,n=t.useMemo(()=>qe(r),[r]),c=t.useRef(null),l=t.useRef(null),u=t.useRef([]),o=t.useRef([]),[i,d]=t.useState(()=>[]),g=t.useRef(!1),p=t.useRef(),E=t.useMemo(()=>se(n.viewport),[n]),v=t.useMemo(()=>se(n.container),[n]),m=n.type==="center",S=m?c:l;le(" AG Row Container "+r+" ",S);const f=t.useCallback(()=>m?c.current!=null&&l.current!=null:l.current!=null,[]),C=t.useCallback(()=>m?c.current==null&&l.current==null:l.current==null,[]),y=t.useCallback(()=>{if(C()&&(s.destroyBean(p.current),p.current=null),f()){const k=b=>{const F=Pe(o.current,u.current,g.current);F!==o.current&&(o.current=F,be(b,()=>d(F)))},D={setHorizontalScroll:b=>{c.current&&(c.current.scrollLeft=b)},setViewportHeight:b=>{c.current&&(c.current.style.height=b)},setRowCtrls:({rowCtrls:b,useFlushSync:F})=>{const w=!!F&&u.current.length>0&&b.length>0;u.current=b,k(w)},setDomOrder:b=>{g.current!=b&&(g.current=b,k(!1))},setContainerWidth:b=>{l.current&&(l.current.style.width=b)},setOffsetTop:b=>{l.current&&(l.current.style.transform="translateY(".concat(b,")"))}};p.current=s.createBean(new Ye(r)),p.current.setComp(D,l.current,c.current)}},[f,C]),P=t.useCallback(k=>{l.current=k,y()},[y]),h=t.useCallback(k=>{c.current=k,y()},[y]),H=()=>a.createElement("div",{className:v,ref:P,role:"rowgroup"},i.map(k=>a.createElement(ts,{rowCtrl:k,containerType:n.type,key:k.getInstanceId()})));return a.createElement(a.Fragment,null,m?a.createElement("div",{className:E,ref:h,role:"presentation"},H()):H())},rs=t.memo(ss),ns=()=>{const{context:e,resizeObserverService:s}=t.useContext(Z),[r,n]=t.useState(""),[c,l]=t.useState(0),[u,o]=t.useState(0),[i,d]=t.useState("0px"),[g,p]=t.useState("0px"),[E,v]=t.useState("100%"),[m,S]=t.useState("0px"),[f,C]=t.useState("0px"),[y,P]=t.useState("100%"),[h,H]=t.useState(""),[k,D]=t.useState(""),[b,F]=t.useState(null),[w,I]=t.useState(""),[R,A]=t.useState(null),[x,U]=t.useState("ag-layout-normal"),W=t.useRef();W.current||(W.current=new Re(()=>O.current));const O=t.useRef(null),B=t.useRef(null),L=t.useRef(null),_=t.useRef(null),T=t.useRef(null),M=t.useRef(null),J=t.useRef(null),G=t.useRef([]),ee=t.useRef([]);le(" AG Grid Body ",O),le(" AG Pinned Top ",B),le(" AG Sticky Top ",L),le(" AG Middle ",M),le(" AG Pinned Bottom ",J);const q=t.useCallback(ie=>{if(O.current=ie,!O.current){e.destroyBeans(G.current),ee.current.forEach(z=>z()),G.current=[],ee.current=[];return}if(!e)return;const fe=(z,X)=>{z.appendChild(X),ee.current.push(()=>z.removeChild(X))},we=z=>{const X=e.createBean(new z);return G.current.push(X),X},pe=(z,X,ze)=>{fe(z,document.createComment(ze)),fe(z,we(X).getGui())};pe(O.current,lt," AG Fake Horizontal Scroll "),pe(O.current,ut," AG Overlay Wrapper "),T.current&&pe(T.current,it," AG Fake Vertical Scroll ");const je={setRowAnimationCssOnBodyViewport:n,setColumnCount:z=>{O.current&&dt(O.current,z)},setRowCount:z=>{O.current&&pt(O.current,z)},setTopHeight:l,setBottomHeight:o,setStickyTopHeight:d,setStickyTopTop:p,setStickyTopWidth:v,setTopDisplay:H,setBottomDisplay:D,setColumnMovingCss:(z,X)=>W.current.addOrRemoveCssClass(z,X),updateLayoutClasses:U,setAlwaysVerticalScrollClass:F,setPinnedTopBottomOverflowY:I,setCellSelectableCss:(z,X)=>A(X?z:null),setBodyViewportWidth:z=>{M.current&&(M.current.style.width=z)},registerBodyViewportResizeListener:z=>{if(M.current){const X=s.observeResize(M.current,z);ee.current.push(()=>X())}},setStickyBottomHeight:S,setStickyBottomBottom:C,setStickyBottomWidth:P},Ie=e.createBean(new Ze);G.current.push(Ie),Ie.setComp(je,O.current,M.current,B.current,J.current,L.current,_.current)},[]),re=t.useMemo(()=>se("ag-root","ag-unselectable",x),[x]),ue=t.useMemo(()=>se("ag-body-viewport",r,x,b,R),[r,x,b,R]),he=t.useMemo(()=>se("ag-body",x),[x]),ye=t.useMemo(()=>se("ag-floating-top",R),[R]),j=t.useMemo(()=>se("ag-sticky-top",R),[R]),$=t.useMemo(()=>se("ag-sticky-bottom",m==="0px"?"ag-hidden":null,R),[R,m]),K=t.useMemo(()=>se("ag-floating-bottom",R),[R]),N=t.useMemo(()=>({height:c,minHeight:c,display:h,overflowY:w}),[c,h,w]),V=t.useMemo(()=>({height:i,top:g,width:E}),[i,g,E]),Y=t.useMemo(()=>({height:m,bottom:f,width:y}),[m,f,y]),Q=t.useMemo(()=>({height:u,minHeight:u,display:k,overflowY:w}),[u,k,w]),ae=ie=>a.createElement(rs,{name:ie,key:"".concat(ie,"-container")}),ce=({section:ie,children:fe,className:we,style:pe})=>a.createElement("div",{ref:ie,className:we,role:"presentation",style:pe},fe.map(ae));return a.createElement("div",{ref:q,className:re,role:"treegrid"},a.createElement(Vt,null),ce({section:B,className:ye,style:N,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:he,ref:T,role:"presentation"},ce({section:M,className:ue,children:["left","center","right","fullWidth"]})),ce({section:L,className:j,style:V,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ce({section:_,className:$,style:Y,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ce({section:J,className:K,style:Q,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},os=t.memo(ns),as=(e,s)=>{const{children:r,eFocusableElement:n,onTabKeyDown:c,gridCtrl:l,forceFocusOutWhenTabGuardsAreEmpty:u}=e,{context:o}=t.useContext(Z),i=t.useRef(null),d=t.useRef(null),g=t.useRef(),p=f=>{const C=f==null?void 0:parseInt(f,10).toString();[i,d].forEach(y=>{var P,h;C===void 0?(P=y.current)==null||P.removeAttribute("tabindex"):(h=y.current)==null||h.setAttribute("tabindex",C)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(f){var C;(C=g.current)==null||C.forceFocusOutOfContainer(f)}}));const E=t.useCallback(()=>{if(!i.current&&!d.current){o.destroyBean(g.current),g.current=null;return}if(i.current&&d.current){const f={setTabIndex:p};g.current=o.createBean(new Xe({comp:f,eTopGuard:i.current,eBottomGuard:d.current,eFocusableElement:n,onTabKeyDown:c,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:C=>l.focusInnerElement(C)}))}},[]),v=t.useCallback(f=>{i.current=f,E()},[E]),m=t.useCallback(f=>{d.current=f,E()},[E]),S=f=>{const C=f==="top"?ve.TAB_GUARD_TOP:ve.TAB_GUARD_BOTTOM;return a.createElement("div",{className:"".concat(ve.TAB_GUARD," ").concat(C),role:"presentation",ref:f==="top"?v:m})};return a.createElement(a.Fragment,null,S("top"),r,S("bottom"))},cs=t.forwardRef(as),ls=t.memo(cs),us=({context:e})=>{const[s,r]=t.useState(""),[n,c]=t.useState(""),[l,u]=t.useState(null),[o,i]=t.useState(null),[d,g]=t.useState(!1),[p,E]=t.useState(),v=t.useRef(null),m=t.useRef(null),S=t.useRef(),[f,C]=t.useState(null),y=t.useRef(()=>{}),P=t.useRef(),h=t.useRef([]),H=t.useCallback(()=>{},[]),k=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);le(" AG Grid ",m);const D=t.useCallback(R=>{if(m.current=R,!m.current){e.destroyBean(v.current),v.current=null;return}if(e.isDestroyed())return;v.current=e.createBean(new et);const A=v.current;y.current=A.focusInnerElement.bind(A);const x={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:U=>{var W,O;if(!U&&((W=P.current)!=null&&W.isDisplayed())){P.current.forceFocusOutOfContainer(U);return}(O=S.current)==null||O.forceFocusOutOfContainer(U)},updateLayoutClasses:c,getFocusableContainers:()=>{var O;const U=[],W=(O=m.current)==null?void 0:O.querySelector(".ag-root");return W&&U.push({getGui:()=>W}),h.current.forEach(B=>{B.isDisplayed()&&U.push(B)}),U},setCursor:u,setUserSelect:i};A.setComp(x,m.current,m.current),g(!0)},[]);t.useEffect(()=>{if(!p||!k||!v.current||!f||!m.current)return;const R=v.current,A=[],{watermarkSelector:x,paginationSelector:U,sideBarSelector:W,statusBarSelector:O,gridHeaderDropZonesSelector:B}=R.getOptionalSelectors(),L=[],_=m.current;if(B){const M=e.createBean(new B.component),J=M.getGui();_.insertAdjacentElement("afterbegin",J),L.push(J),A.push(M)}if(W){const M=e.createBean(new W.component),J=M.getGui(),G=f.querySelector(".ag-tab-guard-bottom");G&&(G.insertAdjacentElement("beforebegin",J),L.push(J)),A.push(M),h.current.push(M)}const T=M=>{const J=e.createBean(new M),G=J.getGui();return _.insertAdjacentElement("beforeend",G),L.push(G),A.push(J),J};if(O&&T(O.component),U){const M=T(U.component);P.current=M,h.current.push(M)}return x&&T(x.component),()=>{e.destroyBeans(A),L.forEach(M=>{M.parentElement&&M.parentElement.removeChild(M)})}},[p,f,k]);const b=t.useMemo(()=>se("ag-root-wrapper",s,n),[s,n]),F=t.useMemo(()=>se("ag-root-wrapper-body","ag-focus-managed",n),[n]),w=t.useMemo(()=>({userSelect:o!=null?o:"",WebkitUserSelect:o!=null?o:"",cursor:l!=null?l:""}),[o,l]),I=t.useCallback(R=>{S.current=R,E(R!==null)},[]);return a.createElement("div",{ref:D,className:b,style:w,role:"presentation"},a.createElement("div",{className:F,ref:C,role:"presentation"},d&&f&&k&&a.createElement(Z.Provider,{value:k},a.createElement(ls,{ref:I,eFocusableElement:f,onTabKeyDown:H,gridCtrl:v.current,forceFocusOutWhenTabGuardsAreEmpty:!0},a.createElement(os,null)))))},is=t.memo(us),ds=class extends ht{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},Ve=e=>{var S,f;const s=t.useRef(),r=t.useRef(null),n=t.useRef(null),c=t.useRef([]),l=t.useRef([]),u=t.useRef(e),o=t.useRef(),i=t.useRef(!1),[d,g]=t.useState(void 0),[,p]=t.useState(0),E=t.useCallback(C=>{var I;if(r.current=C,!r.current){c.current.forEach(R=>R()),c.current.length=0;return}const y=e.modules||[];n.current||(n.current=new At(()=>p(R=>R+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),c.current.push(()=>{var R;(R=n.current)==null||R.destroy(),n.current=null}));const P=tt(e.gridOptions,e),h=()=>{if(i.current){const R=()=>{var x;return(x=o.current)!=null&&x.shouldQueueUpdates()?void 0:l.current.shift()};let A=R();for(;A;)A(),A=R()}},H=ft()?new fs(h):new _e;o.current=H;const k=new ds,D={providedBeanInstances:{frameworkComponentWrapper:new ms(n.current,(I=P.reactiveCustomComponents)!=null?I:!0),renderStatusService:k},modules:y,frameworkOverrides:H},b=R=>{g(R),R.createBean(k),c.current.push(()=>{R.destroy()}),R.getBean("ctrlsService").whenReady(()=>{if(R.isDestroyed())return;const x=s.current;x&&e.setGridApi&&e.setGridApi(x)})},F=R=>{R.getBean("ctrlsService").whenReady(()=>{l.current.forEach(x=>x()),l.current.length=0,i.current=!0})},w=new mt;s.current=w.create(r.current,P,b,F,D)},[]),v=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),m=t.useCallback(C=>{var y;i.current&&!((y=o.current)!=null&&y.shouldQueueUpdates())?C():l.current.push(C)},[]);return t.useEffect(()=>{const C=ps(u.current,e);u.current=e,m(()=>{s.current&&st(C,s.current)})},[e]),a.createElement("div",{style:v,className:e.className,ref:E},d&&!d.isDestroyed()?a.createElement(is,{context:d}):null,(f=(S=n.current)==null?void 0:S.getPortals())!=null?f:null)};function ps(e,s){const r={};return Object.keys(s).forEach(n=>{const c=s[n];e[n]!==c&&(r[n]=c)}),r}var ms=class extends rt{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const c=(l=>{switch(l){case"filter":return St;case"floatingFilterComponent":return bt;case"dateComponent":return vt;case"loadingOverlayComponent":return Pt;case"noRowsOverlayComponent":return Mt;case"statusPanel":return Ft;case"toolPanel":return It;case"menuItem":return kt;case"cellRenderer":return wt}})(s.propertyName);if(c)return new c(e,this.parent,s)}else switch(s.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Fe();break}const r=!s.cellRenderer&&s.propertyName!=="toolPanel";return new Ue(e,this.parent,s,r)}},hs=t.forwardRef((e,s)=>{const{ctrlsFactory:r,context:n,gos:c,resizeObserverService:l,rowModel:u}=t.useContext(Z),[o,i]=t.useState(()=>new te),[d,g]=t.useState(()=>new te),[p,E]=t.useState(),[v,m]=t.useState(),S=t.useRef(),f=t.useRef(null),C=t.useRef(),y=t.useMemo(()=>Je.__getGridRegisteredModules(e.api.getGridId()),[e]),P=t.useMemo(()=>o.toString()+" ag-details-row",[o]),h=t.useMemo(()=>d.toString()+" ag-details-grid",[d]);s&&t.useImperativeHandle(s,()=>({refresh(){var D,b;return(b=(D=S.current)==null?void 0:D.refresh())!=null?b:!1}})),e.template&&ge("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const H=t.useCallback(D=>{if(f.current=D,!f.current){n.destroyBean(S.current),C.current&&C.current();return}const b={addOrRemoveCssClass:(w,I)=>i(R=>R.setClass(w,I)),addOrRemoveDetailGridCssClass:(w,I)=>g(R=>R.setClass(w,I)),setDetailGrid:w=>E(w),setRowData:w=>m(w),getGui:()=>f.current},F=r.getInstance("detailCellRenderer");if(F&&(n.createBean(F),F.init(b,e),S.current=F,c.get("detailRowAutoHeight"))){const w=()=>{if(f.current==null)return;const I=f.current.clientHeight;I!=null&&I>0&&setTimeout(()=>{e.node.setRowHeight(I),(u.getType()==="clientSide"||u.getType()==="serverSide")&&u.onRowHeightChanged()},0)};C.current=l.observeResize(f.current,w),w()}},[]),k=t.useCallback(D=>{var b;(b=S.current)==null||b.registerDetailWithMaster(D)},[]);return a.createElement("div",{className:P,ref:H},p&&a.createElement(Ve,{className:h,...p,modules:y,rowData:v,setGridApi:k}))}),_e=class extends nt{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:Oe,agGroupRowRenderer:Oe,agDetailCellRenderer:hs},this.wrapIncoming=(e,s)=>s==="ensureVisible"?Ct(e):e(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}shouldQueueUpdates(){return!1}getLockOnRefreshError(){return" This error can also occur if using 'ReactDOM.render' instead of 'createRoot'. If so, please upgrade to 'createRoot'."}},fs=class extends _e{constructor(e){super(),this.processQueuedUpdates=e,this.queueUpdates=!1}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}getLockOnRefreshError(){return""}},Rs=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(Ve,{...this.props,setGridApi:this.setGridApi})}};export{Rs as A};
