System.register(["./chakra-legacy-OvwQ_II1.js","./index-legacy-DPdK8GHb.js","./react-legacy-BR1l8Q-0.js","./app-router-legacy-6JkHkUD_.js","./ag-grid-react-legacy-BY62gjvN.js","./param-selector-legacy-MG5oMf8V.js","./ag-grid-community-legacy-BzZBaXCc.js"],(function(e,a){"use strict";var n,l,r,t,i,s,o,d,u,c,g,m,p,h,f,x,v,b,S,j;return{setters:[e=>{n=e.at,l=e.u,r=e.j,t=e.B,i=e.g,s=e.aB},e=>{o=e.d,d=e.u,u=e.e,c=e.aT,g=e.g,m=e.aa,p=e.a9,h=e.ab,f=e.aU},e=>{x=e.u,v=e.r},e=>{b=e.g,S=e.R},e=>{j=e.A},null,null],execute:function(){e("default",(function(e){const{branchIndex:n}=e,{t:l,i18n:t}=x(),i=o(),R=d((e=>e.app.sidePanelMode)),{style:N,theme:w,stn_list:C,line_num:A,coline:G}=d((e=>e.param)),T=d((e=>e.helper.branches)),[M,k]=v.useState([]);v.useEffect((()=>{const e=T[n].reduce(((e,a)=>["linestart","lineend"].includes(a)?e:[...e,{...C[a],id:a,rowSpan:i(b(a,n))}]),[]);k(e)}),[T,n,C]);const I=v.useMemo((()=>[{headerName:l("StationAgGrid.num"),field:"num",cellRenderer:({value:e})=>r.jsx(y,{lineNumber:A,stationNumber:e,lineColour:w[2]}),pinned:"left",minWidth:110,hide:![u.GZMTR].includes(N)},{headerName:l("Chinese name"),field:"name",valueFormatter:({value:e,data:a})=>e[0]+(N===u.GZMTR&&null!=a&&a.secondaryName&&null!=a&&a.secondaryName[0]?` (${a.secondaryName[0]})`:"")},{headerName:l("English name"),field:"name",cellRenderer:({value:e,data:a})=>r.jsx(S,{text:e[1]+(N===u.GZMTR&&a.secondaryName&&a.secondaryName[1]?` (${a.secondaryName[1]})`:"")}),minWidth:300},{headerName:l("StationAgGrid.interchange"),field:"transfer",cellRenderer:({value:e})=>r.jsx(s,{children:e.groups.map((e=>{var a;return null!==(a=e.lines)&&void 0!==a?a:[]})).flat().map(((e,a)=>{var n,l,t,i;return r.jsx(c,{name:e.name,bg:null!==(n=null===(l=e.theme)||void 0===l?void 0:l[2])&&void 0!==n?n:"#aaaaaa",fg:null!==(t=null===(i=e.theme)||void 0===i?void 0:i[3])&&void 0!==t?t:g.white,showShortName:!0},a)}))})},{headerName:l("StationAgGrid.coline"),field:"rowSpan",rowSpan:({data:e})=>{var a;return null!==(a=null==e?void 0:e.rowSpan[0])&&void 0!==a?a:0},cellClassRules:{"rmg-ag-grid--spanned-cell":({value:e})=>e[0]>0},cellRenderer:({value:e})=>{var a;return r.jsx(s,{children:null===(a=G[e[1]])||void 0===a||null===(a=a.colors)||void 0===a?void 0:a.map(((e,a)=>r.jsx(c,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},a)))})},hide:![u.SHMetro].includes(N)}]),[N,w.toString(),t.language]),D=v.useRef(null),E=v.useRef(!1);v.useEffect((()=>{E.current&&D.current&&1===D.current.api.getSelectedRows().length&&R!==m.STATION&&D.current.api.deselectAll()}),[E.current,R]);const[H]=v.useState({resizable:!0}),W=v.useCallback((()=>{E.current=!0}),[E.current]),Z=v.useCallback((({api:e})=>{var a;const n=null===(a=e.getSelectedRows())||void 0===a?void 0:a.map((e=>e.id));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",n),null!=n&&n.length&&(i(p(m.STATION)),i(h(n[0])),i(f(void 0)))}),[]),z=v.useCallback((({data:e})=>e.id),[]);return r.jsx(a,{children:r.jsx(j,{ref:D,rowData:M,defaultColDef:H,columnDefs:I,getRowId:z,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:Z,onGridReady:W,debug:!1})})}));var a=function(e){var a=e.children,i=n().colorMode,s=l("RmgAgGrid");return r.jsx(t,{className:"light"===i?"ag-theme-alpine":"ag-theme-alpine-dark",sx:s,children:a})};function y(e){const{lineNumber:a,stationNumber:n,lineColour:l}=e,t={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:l,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return r.jsxs(i,{sx:t,children:[r.jsx("span",{children:a}),r.jsx("span",{children:n})]})}}}}));
