import{j as e,a8 as S,a9 as M,c as _,D as A,aB as y,af as g,O as h}from"./chakra-DWsU6AdI.js";import{r as o,E as p,aF as L,aL as b,aM as k}from"./index-D-S8OyuV.js";import{u as O,p as z,r as t}from"./react-BkzPY0ae.js";import{c as x,P as D,e as B,u as V}from"./param-selector-Cham7T0c.js";const w="rmg-bridge--",N={overflow:"hidden",flex:1,px:2,pb:2,"& > div":{m:0,h:"100%","& > div":{h:"100%"}}};function U(){const{t:a}=O(),[d]=z(),f=d.get("parentId"),c=d.get("parentComponent"),[v,u]=t.useState([]),[r,i]=t.useState(),[I,l]=t.useState(!1),n=t.useRef();t.useEffect(()=>(n.current=new BroadcastChannel(w+f),o.event(p.APP_CLIP_VIEW_OPENED,{parentComponent:c}),u(x()),()=>{var s;(s=n.current)==null||s.close()}),[]);const j=()=>{var P;if(!r)return;const{config:s,param:m}=B(r);try{(P=n.current)==null||P.postMessage({event:"IMPORT",meta:s,data:m&&V(m)}),o.event(p.APP_CLIP_VIEW_IMPORT,{parentComponent:c}),i(void 0),l(!1)}catch(R){console.error("Unable to update param",R),l(!0)}},C=()=>{var s;(s=n.current)==null||s.postMessage({event:"CLOSE"}),o.event(p.APP_CLIP_VIEW_CLOSED,{parentComponent:c}),i(void 0),l(!1)},E=()=>{o.openApp({appId:"rmg"})};return e.jsxs(L,{children:[I&&e.jsxs(S,{status:"error",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[e.jsx(M,{}),a("Project selected is invalid or corrupted.")]}),e.jsx(_.div,{sx:N,children:e.jsx(D,{paramRegistry:v,selectedParam:r,onParamSelect:i})}),e.jsx(A,{}),e.jsxs(y,{p:2,children:[e.jsx(g,{variant:"ghost",size:"sm","aria-label":a("Manage"),title:a("Manage"),icon:e.jsx(b,{}),onClick:E}),e.jsx(g,{variant:"ghost",size:"sm","aria-label":a("Reload"),title:a("Reload"),icon:e.jsx(k,{}),onClick:()=>u(x())}),e.jsx(h,{size:"sm",onClick:C,ml:"auto",children:a("Close")}),e.jsx(h,{size:"sm",colorScheme:"primary",isDisabled:!r,onClick:j,children:a("Import")})]})]})}export{U as default};
