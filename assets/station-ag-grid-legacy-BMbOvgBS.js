System.register(["./chakra-legacy-BHw8fK6i.js","./index-legacy-REAZmiPy.js","./react-legacy-BKCxzMII.js","./app-router-legacy-hMnOoy7k.js","./ag-grid-react-legacy-YV2YvgTu.js","./param-selector-legacy-BCuNTsnI.js","./ag-grid-community-legacy-DapG474l.js"],(function(e,a){"use strict";var n,r,t,l,s,i,o,d,c,u,g,m,p,h,f,x,b,S,j,y;return{setters:[e=>{n=e.at,r=e.u,t=e.j,l=e.B,s=e.g,i=e.aB},e=>{o=e.d,d=e.u,c=e.e,u=e.aS,g=e.g,m=e.aa,p=e.a9,h=e.ab,f=e.aT},e=>{x=e.u,b=e.r},e=>{S=e.g,j=e.R},e=>{y=e.A},null,null],execute:function(){e("default",(function(e){const{branchIndex:n}=e,{t:r,i18n:l}=x(),s=o(),N=d((e=>e.app.sidePanelMode)),{style:w,theme:C,stn_list:v,line_num:A,coline:G}=d((e=>e.param)),T=d((e=>e.helper.branches)),[M,k]=b.useState([]);b.useEffect((()=>{const e=T[n].reduce(((e,a)=>["linestart","lineend"].includes(a)?e:[...e,{...v[a],id:a,rowSpan:s(S(a,n))}]),[]);k(e)}),[T,n,v]);const I=b.useMemo((()=>[{headerName:r("StationAgGrid.num"),field:"num",cellRenderer:({value:e})=>t.jsx(R,{lineNumber:A,stationNumber:e,lineColour:C[2]}),pinned:"left",minWidth:110,hide:![c.GZMTR].includes(w)},{headerName:r("Chinese name"),field:"name",valueFormatter:({value:e,data:a})=>e[0]+(w===c.GZMTR&&a?.secondaryName&&a?.secondaryName[0]?` (${a.secondaryName[0]})`:"")},{headerName:r("English name"),field:"name",cellRenderer:({value:e,data:a})=>t.jsx(j,{text:e[1]+(w===c.GZMTR&&a.secondaryName&&a.secondaryName[1]?` (${a.secondaryName[1]})`:"")}),minWidth:300},{headerName:r("StationAgGrid.interchange"),field:"transfer",cellRenderer:({value:e})=>t.jsx(i,{children:e.groups.map((e=>e.lines??[])).flat().map(((e,a)=>t.jsx(u,{name:e.name,bg:e.theme?.[2]??"#aaaaaa",fg:e.theme?.[3]??g.white,showShortName:!0},a)))})},{headerName:r("StationAgGrid.coline"),field:"rowSpan",rowSpan:({data:e})=>e?.rowSpan[0]??0,cellClassRules:{"rmg-ag-grid--spanned-cell":({value:e})=>e[0]>0},cellRenderer:({value:e})=>t.jsx(i,{children:G[e[1]]?.colors?.map(((e,a)=>t.jsx(u,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},a)))}),hide:![c.SHMetro].includes(w)}]),[w,C.toString(),l.language]),D=b.useRef(null),E=b.useRef(!1);b.useEffect((()=>{E.current&&D.current&&1===D.current.api.getSelectedRows().length&&N!==m.STATION&&D.current.api.deselectAll()}),[E.current,N]);const[H]=b.useState({resizable:!0}),W=b.useCallback((()=>{E.current=!0}),[E.current]),Z=b.useCallback((({api:e})=>{const a=e.getSelectedRows()?.map((e=>e.id));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",a),a?.length&&(s(p(m.STATION)),s(h(a[0])),s(f(void 0)))}),[]),z=b.useCallback((({data:e})=>e.id),[]);return t.jsx(a,{children:t.jsx(y,{ref:D,rowData:M,defaultColDef:H,columnDefs:I,getRowId:z,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:Z,onGridReady:W,debug:!1})})}));var a=function(e){var a=e.children,s=n().colorMode,i=r("RmgAgGrid");return t.jsx(l,{className:"light"===s?"ag-theme-alpine":"ag-theme-alpine-dark",sx:i,children:a})};function R(e){const{lineNumber:a,stationNumber:n,lineColour:r}=e,l={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:r,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return t.jsxs(s,{sx:l,children:[t.jsx("span",{children:a}),t.jsx("span",{children:n})]})}}}}));
